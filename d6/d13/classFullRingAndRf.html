<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Beam Longitudinal Dynamics code (BLonD): FullRingAndRf Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='../../open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='../../closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='../../closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="../../annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>FullRingAndRf Class Reference</h1><!-- doxytag: class="FullRingAndRf" -->
<p><code>#include &lt;<a class="el" href="../../d2/d0e/Tracker_8h_source.html">Tracker.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for FullRingAndRf:</div>
<div class="dynsection">
<div class="center"><img src="../../d6/d03/classFullRingAndRf__coll__graph.png" border="0" usemap="#FullRingAndRf_coll__map" alt="Collaboration graph"/></div>
<map name="FullRingAndRf_coll__map" id="FullRingAndRf_coll__map">
<area shape="rect" id="node13" href="../../de/da1/classRingAndRfSection.html" title="{RingAndRfSection\n|+ acceleration_kick\l+ dE_max\l+ elapsed_time\l+ fRfP\l+ fRfVoltage\l+ fTotalVoltage\l+ indices_inside_frame\l+ indices_left_outside\l+ indices_right_outside\l+ noiseFB\l+ periodicity\l+ PL\l+ rf_kick_interp\l+ slices\l+ solver\l+ totalInducedVoltage\l|+ RingAndRfSection()\l+ ~RingAndRfSection()\l+ drift()\l+ drift()\l+ horizontal_cut()\l+ kick()\l+ kick()\l+ rf_voltage_calculation()\l+ set_periodicity()\l+ track()\l}" alt="" coords="1167,2235,1335,2736"/><area shape="rect" id="node15" href="../../d8/d2b/classLHCNoiseFB.html" title="{LHCNoiseFB\n|+ fA\l+ fBlMeas\l+ fBlMeasBBB\l+ fBlTarg\l+ fBunchPattern\l+ fFwhm\l+ fG\l+ fNUpdate\l+ fVariableGain\l+ fX\l&#45; cfwhm\l|+ LHCNoiseFB()\l+ ~LHCNoiseFB()\l+ fwhm_interpolation()\l+ fwhm_multi_bunch()\l+ fwhm_single_bunch()\l+ track()\l}" alt="" coords="869,810,1027,1155"/><area shape="rect" id="node42" href="../../da/d49/classRfParameters.html" title="{RfParameters\n|+ counter\l+ dphi_RF\l+ dphi_RF_steering\l+ E_increment\l+ harmonic\l+ idx\l+ length_ratio\l+ n_rf\l+ omega_RF\l+ omega_RF_d\l+ omega_s0\l+ phi_noise\l+ phi_offset\l+ phi_RF\l+ phi_s\l+ Qs\l+ section_length\l+ t_RF\l+ voltage\l|+ RfParameters()\l+ ~RfParameters()\l+ beta()\l+ energy()\l+ eta_0()\l+ eta_1()\l+ eta_2()\l+ eta_tracking()\l+ gamma()\l+ momentum()\l+ sign_eta_0()\l}" alt="" coords="1631,697,1767,1268"/><area shape="rect" id="node56" href="../../d6/d87/classPhaseLoop.html" title="{PhaseLoop\n|+ alpha\l+ delay\l+ domega_RF\l+ dphi\l+ drho\l+ noiseFB\l+ phi_beam\l+ reference\l+ RFnoise\l|+ PhaseLoop()\l+ PhaseLoop()\l+ ~PhaseLoop()\l+ beam_phase()\l+ default_track()\l+ phase_difference()\l+ radial_difference()\l+ radial_steering_from_freq()\l+ track()\l}" alt="" coords="284,1429,471,1792"/><area shape="rect" id="node61" href="../../da/dd4/classPhaseNoise.html" title="{PhaseNoise\n|+ fAi\l+ fCorr\l+ fDphi\l+ fFMax\l+ fFMin\l+ fFs\l+ fNTurns\l+ fPredistortion\l+ fSeed1\l+ fSeed2\l|+ PhaseNoise()\l+ ~PhaseNoise()\l+ generate()\l+ spectrum_generation()\l+ spectrum_to_phase_noise()\l}" alt="" coords="156,827,351,1138"/><area shape="rect" id="node68" href="../../dc/d45/classSlices.html" title="{Slices\n|+ bin_centers\l+ bl_fwhm\l+ bl_gauss\l+ bl_rms\l+ bp_fwhm\l+ bp_gauss\l+ bp_rms\l+ cut_left\l+ cut_right\l+ cuts_unit\l+ edges\l+ fBeamSpectrum\l+ fBeamSpectrumFreq\l+ fit_option\l+ n_macroparticles\l+ n_sigma\l+ n_slices\l|+ Slices()\l+ ~Slices()\l+ beam_profile_derivative()\l+ beam_profile_filter_chebyshev()\l+ beam_spectrum_generation()\l+ convert_coordinates()\l+ fast_fwhm()\l+ fwhm()\l+ fwhm_multibunch()\l+ gauss()\l+ gaussian_fit()\l+ histogram()\l+ rms()\l+ set_cuts()\l+ slice_constant_space_histogram()\l+ slice_constant_space_histogram_smooth()\l+ smooth_histogram()\l+ sort_particles()\l+ track()\l+ track_cuts()\l&#45; gaussian_filter1d()\l&#45; gradient()\l}" alt="" coords="1992,619,2275,1346"/><area shape="rect" id="node26" href="../../d4/dd7/classTotalInducedVoltage.html" title="{TotalInducedVoltage\n|+ fCounterTurn\l+ fInducedVoltageList\l+ fInductiveImpedanceOn\l+ fNTurnsMemory\l+ fRevTimeArray\l+ fTimeArray\l|+ TotalInducedVoltage()\l+ ~TotalInducedVoltage()\l+ induced_voltage_generation()\l+ induced_voltage_sum()\l+ reprocess()\l+ track()\l+ track_ghosts_particles()\l+ track_memory()\l}" alt="" coords="939,1875,1141,2168"/><area shape="rect" id="node28" href="../../dd/de2/classInducedVoltage.html" title="{InducedVoltage\n|+ fInducedVoltage\l|+ InducedVoltage()\l+ ~InducedVoltage()\l+ induced_voltage_generation()\l+ reprocess()\l+ track()\l}" alt="" coords="643,905,845,1060"/><area shape="rect" id="node7" title="STL class." alt="" coords="1925,157,2040,243"/><area shape="rect" id="node79" title="STL class." alt="" coords="2699,157,2795,243"/></map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>

<p><a href="../../d4/dcb/classFullRingAndRf-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d13/classFullRingAndRf.html#a6f5f0dd707a3dc279bdec805a914f6d8">main_harmonic_t</a> { <a class="el" href="../../d6/d13/classFullRingAndRf.html#a6f5f0dd707a3dc279bdec805a914f6d8aa2f614792c46a5f9485d2d2cd99d6363">lowest_freq</a> =  0, 
<a class="el" href="../../d6/d13/classFullRingAndRf.html#a6f5f0dd707a3dc279bdec805a914f6d8ae83077522000e4dbdb23b545641c13fd">highest_voltage</a> =  1
 }</td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d13/classFullRingAndRf.html#a76598d4ff0844df1493234a658660533">FullRingAndRf</a> (std::vector&lt; <a class="el" href="../../de/da1/classRingAndRfSection.html">RingAndRfSection</a> * &gt; &amp;RingList)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d13/classFullRingAndRf.html#a1dfc1bc6d2de5a7fab56fc08ee3a9e42">~FullRingAndRf</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d13/classFullRingAndRf.html#abf38f0c9ebe6bb856b6d4ca473ad0e5c">potential_well_generation</a> (const <a class="el" href="../../d2/d2c/configuration_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> turn=0, const <a class="el" href="../../d2/d2c/configuration_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> n_points=100000, const <a class="el" href="../../d2/d2c/configuration_8h.html#a004b8ff539eef02deec81922dd98257b">ftype</a> option=lowest_freq, const <a class="el" href="../../d2/d2c/configuration_8h.html#a004b8ff539eef02deec81922dd98257b">ftype</a> dt_margin_percent=0.0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d13/classFullRingAndRf.html#a269c8bc553951546bb6524c1edf4e262">track</a> ()</td></tr>
<tr><td colspan="2"><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d2c/configuration_8h.html#a8e81aff0c6ed859165a99e7685a6dace">f_vector_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d13/classFullRingAndRf.html#ab220132fee1bd0139476c6b99a5aa4b1">fPotentialWell</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d2c/configuration_8h.html#a8e81aff0c6ed859165a99e7685a6dace">f_vector_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d13/classFullRingAndRf.html#a2e6d4d5bc380b9a21a660d27f41bf656">fPotentialWellCoordinates</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d2c/configuration_8h.html#a004b8ff539eef02deec81922dd98257b">ftype</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d13/classFullRingAndRf.html#aadb22b2275db3f27eb8b9c96ab5ea66d">fRingCircumference</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../de/da1/classRingAndRfSection.html">RingAndRfSection</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d13/classFullRingAndRf.html#a9b11a2a731e0051942f8f1d50b605aa3">fRingList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d2c/configuration_8h.html#a004b8ff539eef02deec81922dd98257b">ftype</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d13/classFullRingAndRf.html#a680df3f166d9eefef1d8a0e22f57685c">fRingRadius</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d2c/configuration_8h.html#a8e81aff0c6ed859165a99e7685a6dace">f_vector_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d13/classFullRingAndRf.html#aa4465bbc2580dad431bacefd6194c4c0">fTotalVoltage</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="../../d2/d0e/Tracker_8h_source.html#l00071">71</a> of file <a class="el" href="../../d2/d0e/Tracker_8h_source.html">Tracker.h</a>.</p>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a6f5f0dd707a3dc279bdec805a914f6d8"></a><!-- doxytag: member="FullRingAndRf::main_harmonic_t" ref="a6f5f0dd707a3dc279bdec805a914f6d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d6/d13/classFullRingAndRf.html#a6f5f0dd707a3dc279bdec805a914f6d8">FullRingAndRf::main_harmonic_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a6f5f0dd707a3dc279bdec805a914f6d8aa2f614792c46a5f9485d2d2cd99d6363"></a><!-- doxytag: member="lowest_freq" ref="a6f5f0dd707a3dc279bdec805a914f6d8aa2f614792c46a5f9485d2d2cd99d6363" args="" -->lowest_freq</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a6f5f0dd707a3dc279bdec805a914f6d8ae83077522000e4dbdb23b545641c13fd"></a><!-- doxytag: member="highest_voltage" ref="a6f5f0dd707a3dc279bdec805a914f6d8ae83077522000e4dbdb23b545641c13fd" args="" -->highest_voltage</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="../../d2/d0e/Tracker_8h_source.html#l00074">74</a> of file <a class="el" href="../../d2/d0e/Tracker_8h_source.html">Tracker.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00074"></a>00074 { <a class="code" href="../../d6/d13/classFullRingAndRf.html#a6f5f0dd707a3dc279bdec805a914f6d8aa2f614792c46a5f9485d2d2cd99d6363">lowest_freq</a> = 0, <a class="code" href="../../d6/d13/classFullRingAndRf.html#a6f5f0dd707a3dc279bdec805a914f6d8ae83077522000e4dbdb23b545641c13fd">highest_voltage</a> = 1 };
</pre></div></p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a76598d4ff0844df1493234a658660533"></a><!-- doxytag: member="FullRingAndRf::FullRingAndRf" ref="a76598d4ff0844df1493234a658660533" args="(std::vector&lt; RingAndRfSection * &gt; &amp;RingList)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FullRingAndRf::FullRingAndRf </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../de/da1/classRingAndRfSection.html">RingAndRfSection</a> * &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>RingList</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d6f/Tracker_8cpp_source.html#l00360">360</a> of file <a class="el" href="../../d2/d6f/Tracker_8cpp_source.html">Tracker.cpp</a>.</p>

<p>References <a class="el" href="../../d2/d0e/Tracker_8h_source.html#l00079">fRingCircumference</a>, <a class="el" href="../../d2/d0e/Tracker_8h_source.html#l00081">fRingList</a>, <a class="el" href="../../d2/d0e/Tracker_8h_source.html#l00080">fRingRadius</a>, and <a class="el" href="../../d2/d6f/constants_8h_source.html#l00019">constant::pi</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00361"></a>00361 {
<a name="l00362"></a>00362     <a class="code" href="../../d6/d13/classFullRingAndRf.html#a9b11a2a731e0051942f8f1d50b605aa3">fRingList</a> = RingList;
<a name="l00363"></a>00363 
<a name="l00364"></a>00364     <a class="code" href="../../d6/d13/classFullRingAndRf.html#aadb22b2275db3f27eb8b9c96ab5ea66d">fRingCircumference</a> = 0;
<a name="l00365"></a>00365     <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;ring : <a class="code" href="../../d6/d13/classFullRingAndRf.html#a9b11a2a731e0051942f8f1d50b605aa3">fRingList</a>)
<a name="l00366"></a>00366         <a class="code" href="../../d6/d13/classFullRingAndRf.html#aadb22b2275db3f27eb8b9c96ab5ea66d">fRingCircumference</a> += ring-&gt;fRfP-&gt;section_length;
<a name="l00367"></a>00367 
<a name="l00368"></a>00368     <a class="code" href="../../d6/d13/classFullRingAndRf.html#a680df3f166d9eefef1d8a0e22f57685c">fRingRadius</a> = <a class="code" href="../../d6/d13/classFullRingAndRf.html#aadb22b2275db3f27eb8b9c96ab5ea66d">fRingCircumference</a> / (2 * <a class="code" href="../../da/db5/namespaceconstant.html#a93052d01dc3e88afa6842aa27ec94a47">constant::pi</a>);
<a name="l00369"></a>00369 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1dfc1bc6d2de5a7fab56fc08ee3a9e42"></a><!-- doxytag: member="FullRingAndRf::~FullRingAndRf" ref="a1dfc1bc6d2de5a7fab56fc08ee3a9e42" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FullRingAndRf::~FullRingAndRf </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d6f/Tracker_8cpp_source.html#l00371">371</a> of file <a class="el" href="../../d2/d6f/Tracker_8cpp_source.html">Tracker.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00371"></a>00371 {}
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="abf38f0c9ebe6bb856b6d4ca473ad0e5c"></a><!-- doxytag: member="FullRingAndRf::potential_well_generation" ref="abf38f0c9ebe6bb856b6d4ca473ad0e5c" args="(const uint turn=0, const uint n_points=100000, const ftype option=lowest_freq, const ftype dt_margin_percent=0.0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FullRingAndRf::potential_well_generation </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d2/d2c/configuration_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td>
          <td class="paramname"> <em>turn</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d2c/configuration_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td>
          <td class="paramname"> <em>n_points</em> = <code>100000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d2c/configuration_8h.html#a004b8ff539eef02deec81922dd98257b">ftype</a>&nbsp;</td>
          <td class="paramname"> <em>option</em> = <code>lowest_freq</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d2c/configuration_8h.html#a004b8ff539eef02deec81922dd98257b">ftype</a>&nbsp;</td>
          <td class="paramname"> <em>dt_margin_percent</em> = <code>0.0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d6f/Tracker_8cpp_source.html#l00380">380</a> of file <a class="el" href="../../d2/d6f/Tracker_8cpp_source.html">Tracker.cpp</a>.</p>

<p>References <a class="el" href="../../d2/de2/math__functions_8h_source.html#l00162">mymath::cum_trapezoid()</a>, <a class="el" href="../../d2/de2/math__functions_8h_source.html#l00062">mymath::fast_sin()</a>, <a class="el" href="../../d2/d0e/Tracker_8h_source.html#l00076">fPotentialWell</a>, <a class="el" href="../../d2/d0e/Tracker_8h_source.html#l00077">fPotentialWellCoordinates</a>, <a class="el" href="../../d2/d0e/Tracker_8h_source.html#l00081">fRingList</a>, <a class="el" href="../../d2/d0e/Tracker_8h_source.html#l00078">fTotalVoltage</a>, <a class="el" href="../../d5/d87/globals_8h_source.html#l00018">Context::GP</a>, <a class="el" href="../../d2/de2/math__functions_8h_source.html#l00272">mymath::linspace()</a>, <a class="el" href="../../d2/de2/math__functions_8h_source.html#l00258">mymath::max()</a>, <a class="el" href="../../d2/de2/math__functions_8h_source.html#l00243">mymath::min()</a>, <a class="el" href="../../d2/d6f/constants_8h_source.html#l00019">constant::pi</a>, and <a class="el" href="../../d2/de2/math__functions_8h_source.html#l00327">mymath::sign()</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d7d/Distributions_8h_source.html#l00258">matched_from_distribution_density()</a>, and <a class="el" href="../../dc/d7d/Distributions_8h_source.html#l00158">matched_from_line_density()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00384"></a>00384 {
<a name="l00385"></a>00385     <span class="keyword">auto</span> GP = <a class="code" href="../../d6/d7a/structContext.html#a0a2469a256c098797644d0ec49a8e430">Context::GP</a>;
<a name="l00386"></a>00386     <a class="code" href="../../d2/d2c/configuration_8h.html#a8e81aff0c6ed859165a99e7685a6dace">f_vector_t</a> voltages;
<a name="l00387"></a>00387     <a class="code" href="../../d2/d2c/configuration_8h.html#a8e81aff0c6ed859165a99e7685a6dace">f_vector_t</a> omega_rf;
<a name="l00388"></a>00388     <a class="code" href="../../d2/d2c/configuration_8h.html#a8e81aff0c6ed859165a99e7685a6dace">f_vector_t</a> phi_offsets;
<a name="l00389"></a>00389 
<a name="l00390"></a>00390     <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;ring : <a class="code" href="../../d6/d13/classFullRingAndRf.html#a9b11a2a731e0051942f8f1d50b605aa3">fRingList</a>) {
<a name="l00391"></a>00391         <span class="keywordflow">for</span> (<a class="code" href="../../d2/d2c/configuration_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> i = 0; i &lt; ring-&gt;fRfP-&gt;n_rf; ++i) {
<a name="l00392"></a>00392             voltages.push_back(ring-&gt;fRfP-&gt;voltage[i][turn]);
<a name="l00393"></a>00393             omega_rf.push_back(ring-&gt;fRfP-&gt;omega_RF[i][turn]);
<a name="l00394"></a>00394             phi_offsets.push_back(ring-&gt;fRfP-&gt;phi_RF[i][turn]);
<a name="l00395"></a>00395         }
<a name="l00396"></a>00396     }
<a name="l00397"></a>00397 
<a name="l00398"></a>00398     <a class="code" href="../../d2/d2c/configuration_8h.html#a004b8ff539eef02deec81922dd98257b">ftype</a> main_omega_rf;
<a name="l00399"></a>00399     <span class="keywordflow">if</span> (option == 0) {
<a name="l00400"></a>00400         <span class="keyword">auto</span> k = <a class="code" href="../../df/d6d/namespacemymath.html#a4220093922a0ab5e3a6e265b0c94ec89">mymath::min</a>(omega_rf.data(), omega_rf.size());
<a name="l00401"></a>00401         main_omega_rf = omega_rf[k];
<a name="l00402"></a>00402     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (option == 1) {
<a name="l00403"></a>00403         <span class="keyword">auto</span> k = <a class="code" href="../../df/d6d/namespacemymath.html#ac97a14fb7beabf96c5802f5c9d75a9e1">mymath::max</a>(voltages.data(), voltages.size());
<a name="l00404"></a>00404         <span class="keyword">auto</span> maxV = voltages[k];
<a name="l00405"></a>00405 
<a name="l00406"></a>00406         <a class="code" href="../../d2/d2c/configuration_8h.html#a8e81aff0c6ed859165a99e7685a6dace">f_vector_t</a> temp;
<a name="l00407"></a>00407 
<a name="l00408"></a>00408         <span class="keywordflow">for</span> (<a class="code" href="../../d2/d2c/configuration_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> i = 0; i &lt; voltages.size(); ++i)
<a name="l00409"></a>00409             <span class="keywordflow">if</span> (voltages[i] == maxV)
<a name="l00410"></a>00410                 temp.push_back(omega_rf[i]);
<a name="l00411"></a>00411 
<a name="l00412"></a>00412         k = <a class="code" href="../../df/d6d/namespacemymath.html#a4220093922a0ab5e3a6e265b0c94ec89">mymath::min</a>(temp.data(), temp.size());
<a name="l00413"></a>00413         main_omega_rf = temp[k];
<a name="l00414"></a>00414     } <span class="keywordflow">else</span> {
<a name="l00415"></a>00415         <a class="code" href="../../d2/d2c/configuration_8h.html#a8e81aff0c6ed859165a99e7685a6dace">f_vector_t</a> temp;
<a name="l00416"></a>00416         std::copy_if(omega_rf.begin(), omega_rf.end(), back_inserter(temp),
<a name="l00417"></a>00417         [option](<span class="keyword">const</span> <a class="code" href="../../d2/d2c/configuration_8h.html#a004b8ff539eef02deec81922dd98257b">ftype</a> x) { <span class="keywordflow">return</span> x == option; });
<a name="l00418"></a>00418         <span class="keywordflow">if</span> (temp.empty()) {
<a name="l00419"></a>00419             std::cerr &lt;&lt; <span class="stringliteral">&quot;[ERROR] The desired harmonic to compute&quot;</span>
<a name="l00420"></a>00420                       &lt;&lt; <span class="stringliteral">&quot;the potential well does not&quot;</span>
<a name="l00421"></a>00421                       &lt;&lt; <span class="stringliteral">&quot;match the RF parameters...\n&quot;</span>;
<a name="l00422"></a>00422             exit(-1);
<a name="l00423"></a>00423         }
<a name="l00424"></a>00424         main_omega_rf = option;<span class="comment">//temp[k];</span>
<a name="l00425"></a>00425     }
<a name="l00426"></a>00426 
<a name="l00427"></a>00427     <span class="keyword">auto</span> time_array_margin =
<a name="l00428"></a>00428         dt_margin_percent * 2 * <a class="code" href="../../da/db5/namespaceconstant.html#a93052d01dc3e88afa6842aa27ec94a47">constant::pi</a> / main_omega_rf;
<a name="l00429"></a>00429 
<a name="l00430"></a>00430     <span class="keyword">auto</span> slippage_factor = fRingList[0]-&gt;fRfP-&gt;eta_0(turn);
<a name="l00431"></a>00431 
<a name="l00432"></a>00432     <span class="keyword">auto</span> first_dt = -time_array_margin / 2;
<a name="l00433"></a>00433     <span class="keyword">auto</span> last_dt = 2 * <a class="code" href="../../da/db5/namespaceconstant.html#a93052d01dc3e88afa6842aa27ec94a47">constant::pi</a> / main_omega_rf + time_array_margin / 2;
<a name="l00434"></a>00434 
<a name="l00435"></a>00435     <a class="code" href="../../d2/d2c/configuration_8h.html#a8e81aff0c6ed859165a99e7685a6dace">f_vector_t</a> time_array(n_points);
<a name="l00436"></a>00436     <a class="code" href="../../df/d6d/namespacemymath.html#a45cee6943f76e1f289057abfa0c9c1fc">mymath::linspace</a>(time_array.data(), first_dt, last_dt, n_points);
<a name="l00437"></a>00437 
<a name="l00438"></a>00438     <a class="code" href="../../d6/d13/classFullRingAndRf.html#aa4465bbc2580dad431bacefd6194c4c0">fTotalVoltage</a>.resize(time_array.size());
<a name="l00439"></a>00439 
<a name="l00440"></a>00440     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; (int)time_array.size(); ++i) {
<a name="l00441"></a>00441         <a class="code" href="../../d2/d2c/configuration_8h.html#a004b8ff539eef02deec81922dd98257b">ftype</a> sum = 0.0;
<a name="l00442"></a>00442         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; (int)voltages.size(); ++j) {
<a name="l00443"></a>00443             sum += voltages[j] * <a class="code" href="../../df/d6d/namespacemymath.html#ad1aa822800d7c0b68cec8efe86a34602">mymath::fast_sin</a>(omega_rf[j] * time_array[i] +
<a name="l00444"></a>00444                                                   phi_offsets[j]);
<a name="l00445"></a>00445         }
<a name="l00446"></a>00446         <a class="code" href="../../d6/d13/classFullRingAndRf.html#aa4465bbc2580dad431bacefd6194c4c0">fTotalVoltage</a>[i] = sum;
<a name="l00447"></a>00447     }
<a name="l00448"></a>00448 
<a name="l00449"></a>00449     <span class="keyword">const</span> <span class="keyword">auto</span> eom_factor_potential =
<a name="l00450"></a>00450         <a class="code" href="../../df/d6d/namespacemymath.html#a146bad53837f3e384e5b98b2e4c153d0">mymath::sign</a>(slippage_factor) * GP-&gt;charge / GP-&gt;t_rev[turn];
<a name="l00451"></a>00451 
<a name="l00452"></a>00452     <span class="keyword">auto</span> tempVec = <a class="code" href="../../d6/d13/classFullRingAndRf.html#aa4465bbc2580dad431bacefd6194c4c0">fTotalVoltage</a>;
<a name="l00453"></a>00453     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; (int)<a class="code" href="../../d6/d13/classFullRingAndRf.html#aa4465bbc2580dad431bacefd6194c4c0">fTotalVoltage</a>.size(); ++i)
<a name="l00454"></a>00454         tempVec[i] =
<a name="l00455"></a>00455             eom_factor_potential *
<a name="l00456"></a>00456             (tempVec[i] -
<a name="l00457"></a>00457              (-fRingList[0]-&gt;acceleration_kick[turn]) / std::abs(GP-&gt;charge));
<a name="l00458"></a>00458 
<a name="l00459"></a>00459     <span class="keyword">auto</span> tempArr = <a class="code" href="../../df/d6d/namespacemymath.html#a8803643febde6c849f4c22e46d027515">mymath::cum_trapezoid</a>(
<a name="l00460"></a>00460                        tempVec.data(), time_array[1] - time_array[0], n_points);
<a name="l00461"></a>00461 
<a name="l00462"></a>00462     std::transform(tempArr.begin(), tempArr.end(), tempArr.begin(),
<a name="l00463"></a>00463     [](<a class="code" href="../../d2/d2c/configuration_8h.html#a004b8ff539eef02deec81922dd98257b">ftype</a> x) { <span class="keywordflow">return</span> -x; });
<a name="l00464"></a>00464 
<a name="l00465"></a>00465     <span class="keyword">auto</span> min_i = <a class="code" href="../../df/d6d/namespacemymath.html#a4220093922a0ab5e3a6e265b0c94ec89">mymath::min</a>(tempArr.data(), tempArr.size());
<a name="l00466"></a>00466     <span class="keyword">auto</span> <a class="code" href="../../df/d6d/namespacemymath.html#a4220093922a0ab5e3a6e265b0c94ec89">min</a> = tempArr[min_i] &gt; 0 ? 0 : tempArr[min_i];
<a name="l00467"></a>00467 
<a name="l00468"></a>00468     <a class="code" href="../../d6/d13/classFullRingAndRf.html#ab220132fee1bd0139476c6b99a5aa4b1">fPotentialWell</a>.resize(tempArr.size() + 1);
<a name="l00469"></a>00469     <a class="code" href="../../d6/d13/classFullRingAndRf.html#ab220132fee1bd0139476c6b99a5aa4b1">fPotentialWell</a>[0] = - min;
<a name="l00470"></a>00470 
<a name="l00471"></a>00471     <span class="keywordflow">for</span> (<a class="code" href="../../d2/d2c/configuration_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> i = 0; i &lt; tempArr.size(); ++i)
<a name="l00472"></a>00472         <a class="code" href="../../d6/d13/classFullRingAndRf.html#ab220132fee1bd0139476c6b99a5aa4b1">fPotentialWell</a>[i + 1] = tempArr[i] - min;
<a name="l00473"></a>00473 
<a name="l00474"></a>00474     <a class="code" href="../../d6/d13/classFullRingAndRf.html#a2e6d4d5bc380b9a21a660d27f41bf656">fPotentialWellCoordinates</a> = time_array;
<a name="l00475"></a>00475 }</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="../../d6/d13/classFullRingAndRf_abf38f0c9ebe6bb856b6d4ca473ad0e5c_cgraph.png" border="0" usemap="#d6/d13/classFullRingAndRf_abf38f0c9ebe6bb856b6d4ca473ad0e5c_cgraph_map" alt=""></div>
<map name="d6/d13/classFullRingAndRf_abf38f0c9ebe6bb856b6d4ca473ad0e5c_cgraph_map" id="d6/d13/classFullRingAndRf_abf38f0c9ebe6bb856b6d4ca473ad0e5c_cgraph">
<area shape="rect" id="node3" href="../../df/d6d/namespacemymath.html#a8803643febde6c849f4c22e46d027515" title="mymath::cum_trapezoid" alt="" coords="315,5,477,35"/><area shape="rect" id="node5" href="../../df/d6d/namespacemymath.html#ad1aa822800d7c0b68cec8efe86a34602" title="mymath::fast_sin" alt="" coords="335,59,457,88"/><area shape="rect" id="node7" href="../../df/d6d/namespacemymath.html#a45cee6943f76e1f289057abfa0c9c1fc" title="mymath::linspace" alt="" coords="333,112,459,141"/><area shape="rect" id="node9" href="../../df/d6d/namespacemymath.html#ac97a14fb7beabf96c5802f5c9d75a9e1" title="mymath::max" alt="" coords="345,165,447,195"/><area shape="rect" id="node11" href="../../df/d6d/namespacemymath.html#a4220093922a0ab5e3a6e265b0c94ec89" title="mymath::min" alt="" coords="347,219,445,248"/><area shape="rect" id="node13" href="../../df/d6d/namespacemymath.html#a146bad53837f3e384e5b98b2e4c153d0" title="mymath::sign" alt="" coords="345,272,447,301"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="../../d6/d13/classFullRingAndRf_abf38f0c9ebe6bb856b6d4ca473ad0e5c_icgraph.png" border="0" usemap="#d6/d13/classFullRingAndRf_abf38f0c9ebe6bb856b6d4ca473ad0e5c_icgraph_map" alt=""></div>
<map name="d6/d13/classFullRingAndRf_abf38f0c9ebe6bb856b6d4ca473ad0e5c_icgraph_map" id="d6/d13/classFullRingAndRf_abf38f0c9ebe6bb856b6d4ca473ad0e5c_icgraph">
<area shape="rect" id="node3" href="../../dc/d7d/Distributions_8h.html#a39ba163b714fe197bd81ac64ffa48d30" title="matched_from_distribution_density" alt="" coords="315,5,539,35"/><area shape="rect" id="node5" href="../../dc/d7d/Distributions_8h.html#af8a750601d38e475a922ae843f837cc9" title="matched_from_line_density" alt="" coords="336,59,517,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a269c8bc553951546bb6524c1edf4e262"></a><!-- doxytag: member="FullRingAndRf::track" ref="a269c8bc553951546bb6524c1edf4e262" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FullRingAndRf::track </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d6f/Tracker_8cpp_source.html#l00373">373</a> of file <a class="el" href="../../d2/d6f/Tracker_8cpp_source.html">Tracker.cpp</a>.</p>

<p>References <a class="el" href="../../d2/d0e/Tracker_8h_source.html#l00081">fRingList</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00374"></a>00374 {
<a name="l00375"></a>00375     <span class="comment">// Loops over all the RingAndRFSection.track methods.</span>
<a name="l00376"></a>00376     <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;ring : <a class="code" href="../../d6/d13/classFullRingAndRf.html#a9b11a2a731e0051942f8f1d50b605aa3">fRingList</a>)
<a name="l00377"></a>00377         ring-&gt;track();
<a name="l00378"></a>00378 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ab220132fee1bd0139476c6b99a5aa4b1"></a><!-- doxytag: member="FullRingAndRf::fPotentialWell" ref="ab220132fee1bd0139476c6b99a5aa4b1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d2c/configuration_8h.html#a8e81aff0c6ed859165a99e7685a6dace">f_vector_t</a> <a class="el" href="../../d6/d13/classFullRingAndRf.html#ab220132fee1bd0139476c6b99a5aa4b1">FullRingAndRf::fPotentialWell</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d0e/Tracker_8h_source.html#l00076">76</a> of file <a class="el" href="../../d2/d0e/Tracker_8h_source.html">Tracker.h</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d7d/Distributions_8h_source.html#l00258">matched_from_distribution_density()</a>, <a class="el" href="../../dc/d7d/Distributions_8h_source.html#l00158">matched_from_line_density()</a>, and <a class="el" href="../../d2/d6f/Tracker_8cpp_source.html#l00380">potential_well_generation()</a>.</p>

</div>
</div>
<a class="anchor" id="a2e6d4d5bc380b9a21a660d27f41bf656"></a><!-- doxytag: member="FullRingAndRf::fPotentialWellCoordinates" ref="a2e6d4d5bc380b9a21a660d27f41bf656" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d2c/configuration_8h.html#a8e81aff0c6ed859165a99e7685a6dace">f_vector_t</a> <a class="el" href="../../d6/d13/classFullRingAndRf.html#a2e6d4d5bc380b9a21a660d27f41bf656">FullRingAndRf::fPotentialWellCoordinates</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d0e/Tracker_8h_source.html#l00077">77</a> of file <a class="el" href="../../d2/d0e/Tracker_8h_source.html">Tracker.h</a>.</p>

<p>Referenced by <a class="el" href="../../dc/d7d/Distributions_8h_source.html#l00258">matched_from_distribution_density()</a>, <a class="el" href="../../dc/d7d/Distributions_8h_source.html#l00158">matched_from_line_density()</a>, and <a class="el" href="../../d2/d6f/Tracker_8cpp_source.html#l00380">potential_well_generation()</a>.</p>

</div>
</div>
<a class="anchor" id="aadb22b2275db3f27eb8b9c96ab5ea66d"></a><!-- doxytag: member="FullRingAndRf::fRingCircumference" ref="aadb22b2275db3f27eb8b9c96ab5ea66d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d2c/configuration_8h.html#a004b8ff539eef02deec81922dd98257b">ftype</a> <a class="el" href="../../d6/d13/classFullRingAndRf.html#aadb22b2275db3f27eb8b9c96ab5ea66d">FullRingAndRf::fRingCircumference</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d0e/Tracker_8h_source.html#l00079">79</a> of file <a class="el" href="../../d2/d0e/Tracker_8h_source.html">Tracker.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/d6f/Tracker_8cpp_source.html#l00360">FullRingAndRf()</a>.</p>

</div>
</div>
<a class="anchor" id="a9b11a2a731e0051942f8f1d50b605aa3"></a><!-- doxytag: member="FullRingAndRf::fRingList" ref="a9b11a2a731e0051942f8f1d50b605aa3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="../../de/da1/classRingAndRfSection.html">RingAndRfSection</a> *&gt; <a class="el" href="../../d6/d13/classFullRingAndRf.html#a9b11a2a731e0051942f8f1d50b605aa3">FullRingAndRf::fRingList</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d0e/Tracker_8h_source.html#l00081">81</a> of file <a class="el" href="../../d2/d0e/Tracker_8h_source.html">Tracker.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/d6f/Tracker_8cpp_source.html#l00360">FullRingAndRf()</a>, <a class="el" href="../../d2/d6f/Tracker_8cpp_source.html#l00380">potential_well_generation()</a>, and <a class="el" href="../../d2/d6f/Tracker_8cpp_source.html#l00373">track()</a>.</p>

</div>
</div>
<a class="anchor" id="a680df3f166d9eefef1d8a0e22f57685c"></a><!-- doxytag: member="FullRingAndRf::fRingRadius" ref="a680df3f166d9eefef1d8a0e22f57685c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d2c/configuration_8h.html#a004b8ff539eef02deec81922dd98257b">ftype</a> <a class="el" href="../../d6/d13/classFullRingAndRf.html#a680df3f166d9eefef1d8a0e22f57685c">FullRingAndRf::fRingRadius</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d0e/Tracker_8h_source.html#l00080">80</a> of file <a class="el" href="../../d2/d0e/Tracker_8h_source.html">Tracker.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/d6f/Tracker_8cpp_source.html#l00360">FullRingAndRf()</a>.</p>

</div>
</div>
<a class="anchor" id="aa4465bbc2580dad431bacefd6194c4c0"></a><!-- doxytag: member="FullRingAndRf::fTotalVoltage" ref="aa4465bbc2580dad431bacefd6194c4c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d2c/configuration_8h.html#a8e81aff0c6ed859165a99e7685a6dace">f_vector_t</a> <a class="el" href="../../d6/d13/classFullRingAndRf.html#aa4465bbc2580dad431bacefd6194c4c0">FullRingAndRf::fTotalVoltage</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="../../d2/d0e/Tracker_8h_source.html#l00078">78</a> of file <a class="el" href="../../d2/d0e/Tracker_8h_source.html">Tracker.h</a>.</p>

<p>Referenced by <a class="el" href="../../d2/d6f/Tracker_8cpp_source.html#l00380">potential_well_generation()</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 5 Sep 2016 for Beam Longitudinal Dynamics code (BLonD) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
