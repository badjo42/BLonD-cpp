<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Beam Longitudinal Dynamics code (BLonD): option::PrintUsageImplementation::LineWrapper Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='../../open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='../../closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='../../closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="../../annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="../../df/de0/namespaceoption.html">option</a>::<a class="el" href="../../da/dfb/structoption_1_1PrintUsageImplementation.html">PrintUsageImplementation</a>::<a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html">LineWrapper</a>
  </div>
</div>
<div class="contents">
<h1>option::PrintUsageImplementation::LineWrapper Class Reference</h1><!-- doxytag: class="option::PrintUsageImplementation::LineWrapper" -->
<p><code>#include &lt;<a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for option::PrintUsageImplementation::LineWrapper:</div>
<div class="dynsection">
<div class="center"><img src="../../d5/dbe/classoption_1_1PrintUsageImplementation_1_1LineWrapper__coll__graph.png" border="0" usemap="#option_1_1PrintUsageImplementation_1_1LineWrapper_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>

<p><a href="../../d8/d2e/classoption_1_1PrintUsageImplementation_1_1LineWrapper-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a288f16b6e928e9f54f48e13ff6817e95">LineWrapper</a> (int x1, int x2)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructs a <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html">LineWrapper</a> that wraps its output to fit into screen columns <code>x1</code> (incl.) to <code>x2</code> (excl.).  <a href="#a288f16b6e928e9f54f48e13ff6817e95"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a9383db9fd3fb18ce091db63ce0b149fd">flush</a> (<a class="el" href="../../dd/d0b/structoption_1_1PrintUsageImplementation_1_1IStringWriter.html">IStringWriter</a> &amp;write)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Writes out all remaining data from the <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html">LineWrapper</a> using <code>write</code>. Unlike <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#add20eca40865ad892d6c28b412ac14d5">process()</a> this method indents all lines including the first and will output a \n at the end (but only if something has been written).  <a href="#a9383db9fd3fb18ce091db63ce0b149fd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#add20eca40865ad892d6c28b412ac14d5">process</a> (<a class="el" href="../../dd/d0b/structoption_1_1PrintUsageImplementation_1_1IStringWriter.html">IStringWriter</a> &amp;write, const char *data, int len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Process, wrap and output the next piece of data.  <a href="#add20eca40865ad892d6c28b412ac14d5"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a9cd367ca1d308458366be2ebbd018ebe">buf_empty</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#ac814c95dcda4174b29e2f24c6bb13519">buf_full</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a2e0ef4f940413addf063ad7e429c6556">buf_next</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Call BEFORE reading ...buf[tail].  <a href="#a2e0ef4f940413addf063ad7e429c6556"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a43e2f45da4f29cc1eda7bf1f38a63806">buf_store</a> (const char *data, int len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a5b27b788033f4d6617a910da8cbcd511">output</a> (<a class="el" href="../../dd/d0b/structoption_1_1PrintUsageImplementation_1_1IStringWriter.html">IStringWriter</a> &amp;write, const char *data, int len)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Writes (data,len) into the ring buffer. If the buffer is full, a single line is flushed out of the buffer into <code>write</code>.  <a href="#a5b27b788033f4d6617a910da8cbcd511"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a246494d38e76d7f65a70f1d0867dc42f">write_one_line</a> (<a class="el" href="../../dd/d0b/structoption_1_1PrintUsageImplementation_1_1IStringWriter.html">IStringWriter</a> &amp;write)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Writes a single line of output from the buffer to <code>write</code>.  <a href="#a246494d38e76d7f65a70f1d0867dc42f"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#abd9a32967913817ef8266bcf8af3e973">datbuf</a> [<a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#ac47be76ba68b2e70f5cc6285c8e0fa6a">bufmask</a>+1]</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ring buffer for data component of pair (data, length).  <a href="#abd9a32967913817ef8266bcf8af3e973"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a5e2107b64c4a785fb92fca3f99e04c6e">head</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">index for next write  <a href="#a5e2107b64c4a785fb92fca3f99e04c6e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a94c638feb65ec3bea97a80f944e532af">lenbuf</a> [<a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#ac47be76ba68b2e70f5cc6285c8e0fa6a">bufmask</a>+1]</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ring buffer for length component of pair (data, length).  <a href="#a94c638feb65ec3bea97a80f944e532af"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a64dbc7e6c0858a9210ea1f39ce85084e">tail</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">index for next read - 1 (i.e. increment tail BEFORE read)  <a href="#a64dbc7e6c0858a9210ea1f39ce85084e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a535a97a3d4669e873ba1700215d6b7e7">width</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The width of the column to line wrap.  <a href="#a535a97a3d4669e873ba1700215d6b7e7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a97de335317942101262413a35f639b18">wrote_something</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Multiple methods of <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html">LineWrapper</a> may decide to flush part of the buffer to free up space. The contract of <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#add20eca40865ad892d6c28b412ac14d5" title="Process, wrap and output the next piece of data.">process()</a> says that only 1 line is output. So this variable is used to track whether something has output a line. It is reset at the beginning of <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#add20eca40865ad892d6c28b412ac14d5" title="Process, wrap and output the next piece of data.">process()</a> and checked at the end to decide if output has already occurred or is still needed.  <a href="#a97de335317942101262413a35f639b18"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#acf828ad4ee388c881967142866d7d8b9">x</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The indentation of the column to which the LineBuffer outputs. LineBuffer assumes that the indentation has already been written when <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#add20eca40865ad892d6c28b412ac14d5">process()</a> is called, so this value is only used when a buffer flush requires writing additional lines of output.  <a href="#acf828ad4ee388c881967142866d7d8b9"></a><br/></td></tr>
<tr><td colspan="2"><h2>Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#ac47be76ba68b2e70f5cc6285c8e0fa6a">bufmask</a> = 15</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Must be a power of 2 minus 1.  <a href="#ac47be76ba68b2e70f5cc6285c8e0fa6a"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02418">2418</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a288f16b6e928e9f54f48e13ff6817e95"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::LineWrapper" ref="a288f16b6e928e9f54f48e13ff6817e95" args="(int x1, int x2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">option::PrintUsageImplementation::LineWrapper::LineWrapper </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>x1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>x2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructs a <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html">LineWrapper</a> that wraps its output to fit into screen columns <code>x1</code> (incl.) to <code>x2</code> (excl.). </p>
<p><code>x1</code> gives the indentation <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html">LineWrapper</a> uses if it needs to indent. </p>

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02642">2642</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02643"></a>02643                 : <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#acf828ad4ee388c881967142866d7d8b9" title="The indentation of the column to which the LineBuffer outputs. LineBuffer assumes...">x</a>(x1), <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a535a97a3d4669e873ba1700215d6b7e7" title="The width of the column to line wrap.">width</a>(x2 - x1), <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a5e2107b64c4a785fb92fca3f99e04c6e" title="index for next write">head</a>(0), <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a64dbc7e6c0858a9210ea1f39ce85084e" title="index for next read - 1 (i.e. increment tail BEFORE read)">tail</a>(<a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#ac47be76ba68b2e70f5cc6285c8e0fa6a" title="Must be a power of 2 minus 1.">bufmask</a>) {
<a name="l02644"></a>02644                 <span class="keywordflow">if</span> (<a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a535a97a3d4669e873ba1700215d6b7e7" title="The width of the column to line wrap.">width</a> &lt; 2) <span class="comment">// because of wide characters we need at least</span>
<a name="l02645"></a>02645                                <span class="comment">// width 2 or the code breaks</span>
<a name="l02646"></a>02646                     <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a535a97a3d4669e873ba1700215d6b7e7" title="The width of the column to line wrap.">width</a> = 2;
<a name="l02647"></a>02647             }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a9cd367ca1d308458366be2ebbd018ebe"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::buf_empty" ref="a9cd367ca1d308458366be2ebbd018ebe" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool option::PrintUsageImplementation::LineWrapper::buf_empty </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02459">2459</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02459"></a>02459 { <span class="keywordflow">return</span> ((<a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a64dbc7e6c0858a9210ea1f39ce85084e" title="index for next read - 1 (i.e. increment tail BEFORE read)">tail</a> + 1) &amp; <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#ac47be76ba68b2e70f5cc6285c8e0fa6a" title="Must be a power of 2 minus 1.">bufmask</a>) == <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a5e2107b64c4a785fb92fca3f99e04c6e" title="index for next write">head</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac814c95dcda4174b29e2f24c6bb13519"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::buf_full" ref="ac814c95dcda4174b29e2f24c6bb13519" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool option::PrintUsageImplementation::LineWrapper::buf_full </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02461">2461</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02461"></a>02461 { <span class="keywordflow">return</span> <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a64dbc7e6c0858a9210ea1f39ce85084e" title="index for next read - 1 (i.e. increment tail BEFORE read)">tail</a> == <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a5e2107b64c4a785fb92fca3f99e04c6e" title="index for next write">head</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2e0ef4f940413addf063ad7e429c6556"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::buf_next" ref="a2e0ef4f940413addf063ad7e429c6556" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void option::PrintUsageImplementation::LineWrapper::buf_next </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Call BEFORE reading ...buf[tail]. </p>

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02470">2470</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02470"></a>02470 { <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a64dbc7e6c0858a9210ea1f39ce85084e" title="index for next read - 1 (i.e. increment tail BEFORE read)">tail</a> = (<a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a64dbc7e6c0858a9210ea1f39ce85084e" title="index for next read - 1 (i.e. increment tail BEFORE read)">tail</a> + 1) &amp; <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#ac47be76ba68b2e70f5cc6285c8e0fa6a" title="Must be a power of 2 minus 1.">bufmask</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a43e2f45da4f29cc1eda7bf1f38a63806"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::buf_store" ref="a43e2f45da4f29cc1eda7bf1f38a63806" args="(const char *data, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void option::PrintUsageImplementation::LineWrapper::buf_store </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02463">2463</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02463"></a>02463                                                       {
<a name="l02464"></a>02464                 <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a94c638feb65ec3bea97a80f944e532af" title="Ring buffer for length component of pair (data, length).">lenbuf</a>[<a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a5e2107b64c4a785fb92fca3f99e04c6e" title="index for next write">head</a>] = len;
<a name="l02465"></a>02465                 <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#abd9a32967913817ef8266bcf8af3e973" title="Ring buffer for data component of pair (data, length).">datbuf</a>[<a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a5e2107b64c4a785fb92fca3f99e04c6e" title="index for next write">head</a>] = data;
<a name="l02466"></a>02466                 <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a5e2107b64c4a785fb92fca3f99e04c6e" title="index for next write">head</a> = (<a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a5e2107b64c4a785fb92fca3f99e04c6e" title="index for next write">head</a> + 1) &amp; <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#ac47be76ba68b2e70f5cc6285c8e0fa6a" title="Must be a power of 2 minus 1.">bufmask</a>;
<a name="l02467"></a>02467             }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9383db9fd3fb18ce091db63ce0b149fd"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::flush" ref="a9383db9fd3fb18ce091db63ce0b149fd" args="(IStringWriter &amp;write)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void option::PrintUsageImplementation::LineWrapper::flush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d0b/structoption_1_1PrintUsageImplementation_1_1IStringWriter.html">IStringWriter</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>write</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Writes out all remaining data from the <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html">LineWrapper</a> using <code>write</code>. Unlike <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#add20eca40865ad892d6c28b412ac14d5">process()</a> this method indents all lines including the first and will output a \n at the end (but only if something has been written). </p>

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02513">2513</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

<p>Referenced by <a class="el" href="../../da/d69/optionparser_8h_source.html#l02657">option::PrintUsageImplementation::printUsage()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02513"></a>02513                                              {
<a name="l02514"></a>02514                 <span class="keywordflow">if</span> (<a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a9cd367ca1d308458366be2ebbd018ebe">buf_empty</a>())
<a name="l02515"></a>02515                     <span class="keywordflow">return</span>;
<a name="l02516"></a>02516                 <span class="keywordtype">int</span> _ = 0;
<a name="l02517"></a>02517                 <a class="code" href="../../da/dfb/structoption_1_1PrintUsageImplementation.html#a4136c574bba35ea1f478e0b6d7022367">indent</a>(write, _, <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#acf828ad4ee388c881967142866d7d8b9" title="The indentation of the column to which the LineBuffer outputs. LineBuffer assumes...">x</a>);
<a name="l02518"></a>02518                 <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a97de335317942101262413a35f639b18" title="Multiple methods of LineWrapper may decide to flush part of the buffer to free up...">wrote_something</a> = <span class="keyword">false</span>;
<a name="l02519"></a>02519                 <span class="keywordflow">while</span> (!<a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a9cd367ca1d308458366be2ebbd018ebe">buf_empty</a>())
<a name="l02520"></a>02520                     <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a246494d38e76d7f65a70f1d0867dc42f" title="Writes a single line of output from the buffer to write.">write_one_line</a>(write);
<a name="l02521"></a>02521                 write(<span class="stringliteral">&quot;\n&quot;</span>, 1);
<a name="l02522"></a>02522             }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper_a9383db9fd3fb18ce091db63ce0b149fd_icgraph.png" border="0" usemap="#de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper_a9383db9fd3fb18ce091db63ce0b149fd_icgraph_map" alt=""></div>
<map name="de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper_a9383db9fd3fb18ce091db63ce0b149fd_icgraph_map" id="de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper_a9383db9fd3fb18ce091db63ce0b149fd_icgraph">
<area shape="rect" id="node3" href="../../da/dfb/structoption_1_1PrintUsageImplementation.html#ab38c4198c5cccea2ccd992c8e014df70" title="option::PrintUsageImplementation::printUsage" alt="" coords="389,5,680,35"/><area shape="rect" id="node5" href="../../df/de0/namespaceoption.html#a13564b6055a677443dfe6cdcc86875a4" title="Outputs a nicely formatted usage string with support for multi&#45;column formatting..." alt="" coords="728,5,856,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5b27b788033f4d6617a910da8cbcd511"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::output" ref="a5b27b788033f4d6617a910da8cbcd511" args="(IStringWriter &amp;write, const char *data, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void option::PrintUsageImplementation::LineWrapper::output </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d0b/structoption_1_1PrintUsageImplementation_1_1IStringWriter.html">IStringWriter</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Writes (data,len) into the ring buffer. If the buffer is full, a single line is flushed out of the buffer into <code>write</code>. </p>

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02477">2477</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02477"></a>02477                                                                          {
<a name="l02478"></a>02478                 <span class="keywordflow">if</span> (<a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#ac814c95dcda4174b29e2f24c6bb13519">buf_full</a>())
<a name="l02479"></a>02479                     <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a246494d38e76d7f65a70f1d0867dc42f" title="Writes a single line of output from the buffer to write.">write_one_line</a>(write);
<a name="l02480"></a>02480 
<a name="l02481"></a>02481                 <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a43e2f45da4f29cc1eda7bf1f38a63806">buf_store</a>(data, len);
<a name="l02482"></a>02482             }
</pre></div></p>

</div>
</div>
<a class="anchor" id="add20eca40865ad892d6c28b412ac14d5"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::process" ref="add20eca40865ad892d6c28b412ac14d5" args="(IStringWriter &amp;write, const char *data, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void option::PrintUsageImplementation::LineWrapper::process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d0b/structoption_1_1PrintUsageImplementation_1_1IStringWriter.html">IStringWriter</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Process, wrap and output the next piece of data. </p>
<p><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#add20eca40865ad892d6c28b412ac14d5" title="Process, wrap and output the next piece of data.">process()</a> will output at least one line of output. This is not necessarily the <code>data</code> passed in. It may be data queued from a prior call to <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#add20eca40865ad892d6c28b412ac14d5" title="Process, wrap and output the next piece of data.">process()</a>. If the internal buffer is full, more than 1 line will be output.</p>
<p><a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#add20eca40865ad892d6c28b412ac14d5" title="Process, wrap and output the next piece of data.">process()</a> assumes that the a proper amount of indentation has already been output. It won't write any further indentation before the 1st line. If more than 1 line is written due to buffer constraints, the lines following the first will be indented by this method, though.</p>
<p>No \n is written by this method after the last line that is written.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>write</em>&nbsp;</td><td>where to write the data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>the new chunk of data to write. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>the length of the chunk of data to write. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02548">2548</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

<p>Referenced by <a class="el" href="../../da/d69/optionparser_8h_source.html#l02657">option::PrintUsageImplementation::printUsage()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02548"></a>02548                                                                           {
<a name="l02549"></a>02549                 <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a97de335317942101262413a35f639b18" title="Multiple methods of LineWrapper may decide to flush part of the buffer to free up...">wrote_something</a> = <span class="keyword">false</span>;
<a name="l02550"></a>02550 
<a name="l02551"></a>02551                 <span class="keywordflow">while</span> (len &gt; 0) {
<a name="l02552"></a>02552                     <span class="keywordflow">if</span> (len &lt;= <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a535a97a3d4669e873ba1700215d6b7e7" title="The width of the column to line wrap.">width</a>) { <span class="comment">// quick test that works because</span>
<a name="l02553"></a>02553                         <span class="comment">// utf8width &lt;= len (all wide chars have</span>
<a name="l02554"></a>02554                         <span class="comment">// at least 2 bytes)</span>
<a name="l02555"></a>02555                         <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a5b27b788033f4d6617a910da8cbcd511" title="Writes (data,len) into the ring buffer. If the buffer is full, a single line is flushed...">output</a>(write, data, len);
<a name="l02556"></a>02556                         len = 0;
<a name="l02557"></a>02557                     } <span class="keywordflow">else</span> { <span class="comment">// if (len &gt; width)  it&apos;s possible (but not</span>
<a name="l02558"></a>02558                              <span class="comment">// guaranteed) that utf8len &gt; width</span>
<a name="l02559"></a>02559                         <span class="keywordtype">int</span> utf8width = 0;
<a name="l02560"></a>02560                         <span class="keywordtype">int</span> maxi = 0;
<a name="l02561"></a>02561                         <span class="keywordflow">while</span> (maxi &lt; len &amp;&amp; utf8width &lt; <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a535a97a3d4669e873ba1700215d6b7e7" title="The width of the column to line wrap.">width</a>) {
<a name="l02562"></a>02562                             <span class="keywordtype">int</span> charbytes = 1;
<a name="l02563"></a>02563                             <span class="keywordtype">unsigned</span> ch = (<span class="keywordtype">unsigned</span> char)data[maxi];
<a name="l02564"></a>02564                             <span class="keywordflow">if</span> (ch &gt; 0xC1) { <span class="comment">// everything &lt;= 0xC1 (yes, even</span>
<a name="l02565"></a>02565                                 <span class="comment">// 0xC1 itself) is not a valid</span>
<a name="l02566"></a>02566                                 <span class="comment">// UTF-8 start byte</span>
<a name="l02567"></a>02567                                 <span class="comment">// int __builtin_clz (unsigned int x)</span>
<a name="l02568"></a>02568                                 <span class="comment">// Returns the number of leading 0-bits in x,</span>
<a name="l02569"></a>02569                                 <span class="comment">// starting at the most significant bit</span>
<a name="l02570"></a>02570                                 <span class="keywordtype">unsigned</span> mask =
<a name="l02571"></a>02571                                     (unsigned)-1 &gt;&gt; __builtin_clz(ch ^ 0xff);
<a name="l02572"></a>02572                                 ch = ch &amp; mask; <span class="comment">// mask out length bits, we</span>
<a name="l02573"></a>02573                                 <span class="comment">// don&apos;t verify their</span>
<a name="l02574"></a>02574                                 <span class="comment">// correctness</span>
<a name="l02575"></a>02575                                 <span class="keywordflow">while</span> ((maxi + charbytes &lt; len) &amp;&amp; <span class="comment">//</span>
<a name="l02576"></a>02576                                        (((<span class="keywordtype">unsigned</span> char)data[maxi + charbytes] ^
<a name="l02577"></a>02577                                          0x80) &lt;= 0x3F)) { <span class="comment">// while next byte is</span>
<a name="l02578"></a>02578                                                            <span class="comment">// continuation byte</span>
<a name="l02579"></a>02579                                     ch = (ch &lt;&lt; 6) ^
<a name="l02580"></a>02580                                          (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)data[maxi + charbytes] ^
<a name="l02581"></a>02581                                          0x80; <span class="comment">// add continuation to char code</span>
<a name="l02582"></a>02582                                     ++charbytes;
<a name="l02583"></a>02583                                 }
<a name="l02584"></a>02584                                 <span class="comment">// ch is the decoded unicode code point</span>
<a name="l02585"></a>02585                                 <span class="keywordflow">if</span> (ch &gt;= 0x1100 &amp;&amp;
<a name="l02586"></a>02586                                     <a class="code" href="../../da/dfb/structoption_1_1PrintUsageImplementation.html#a41bfaabdf21e68877f3030d36acc0798" title="Returns true if ch is the unicode code point of a wide character.">isWideChar</a>(ch)) { <span class="comment">// the test for 0x1100 is</span>
<a name="l02587"></a>02587                                                       <span class="comment">// here to avoid the</span>
<a name="l02588"></a>02588                                                       <span class="comment">// function call in the</span>
<a name="l02589"></a>02589                                                       <span class="comment">// Latin case</span>
<a name="l02590"></a>02590                                     <span class="keywordflow">if</span> (utf8width + 2 &gt; <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a535a97a3d4669e873ba1700215d6b7e7" title="The width of the column to line wrap.">width</a>)
<a name="l02591"></a>02591                                         <span class="keywordflow">break</span>;
<a name="l02592"></a>02592                                     ++utf8width;
<a name="l02593"></a>02593                                 }
<a name="l02594"></a>02594                             }
<a name="l02595"></a>02595                             ++utf8width;
<a name="l02596"></a>02596                             maxi += charbytes;
<a name="l02597"></a>02597                         }
<a name="l02598"></a>02598 
<a name="l02599"></a>02599                         <span class="comment">// data[maxi-1] is the last byte of the UTF-8 sequence</span>
<a name="l02600"></a>02600                         <span class="comment">// of the last character that fits</span>
<a name="l02601"></a>02601                         <span class="comment">// onto the 1st line. If maxi == len, all characters fit</span>
<a name="l02602"></a>02602                         <span class="comment">// on the line.</span>
<a name="l02603"></a>02603 
<a name="l02604"></a>02604                         <span class="keywordflow">if</span> (maxi == len) {
<a name="l02605"></a>02605                             <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a5b27b788033f4d6617a910da8cbcd511" title="Writes (data,len) into the ring buffer. If the buffer is full, a single line is flushed...">output</a>(write, data, len);
<a name="l02606"></a>02606                             len = 0;
<a name="l02607"></a>02607                         } <span class="keywordflow">else</span> { <span class="comment">// if (maxi &lt; len)  at least 1 character</span>
<a name="l02608"></a>02608                                  <span class="comment">// (data[maxi] that is) doesn&apos;t fit on the line</span>
<a name="l02609"></a>02609                             <span class="keywordtype">int</span> i;
<a name="l02610"></a>02610                             <span class="keywordflow">for</span> (i = maxi; i &gt;= 0; --i)
<a name="l02611"></a>02611                                 <span class="keywordflow">if</span> (data[i] == <span class="charliteral">&apos; &apos;</span>)
<a name="l02612"></a>02612                                     <span class="keywordflow">break</span>;
<a name="l02613"></a>02613 
<a name="l02614"></a>02614                             <span class="keywordflow">if</span> (i &gt;= 0) {
<a name="l02615"></a>02615                                 <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a5b27b788033f4d6617a910da8cbcd511" title="Writes (data,len) into the ring buffer. If the buffer is full, a single line is flushed...">output</a>(write, data, i);
<a name="l02616"></a>02616                                 data += i + 1;
<a name="l02617"></a>02617                                 len -= i + 1;
<a name="l02618"></a>02618                             } <span class="keywordflow">else</span> { <span class="comment">// did not find a space to split at =&gt;</span>
<a name="l02619"></a>02619                                      <span class="comment">// split before data[maxi]</span>
<a name="l02620"></a>02620                                      <span class="comment">// data[maxi] is always the beginning of a</span>
<a name="l02621"></a>02621                                      <span class="comment">// character, never a continuation byte</span>
<a name="l02622"></a>02622                                 <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a5b27b788033f4d6617a910da8cbcd511" title="Writes (data,len) into the ring buffer. If the buffer is full, a single line is flushed...">output</a>(write, data, maxi);
<a name="l02623"></a>02623                                 data += maxi;
<a name="l02624"></a>02624                                 len -= maxi;
<a name="l02625"></a>02625                             }
<a name="l02626"></a>02626                         }
<a name="l02627"></a>02627                     }
<a name="l02628"></a>02628                 }
<a name="l02629"></a>02629                 <span class="keywordflow">if</span> (!<a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a97de335317942101262413a35f639b18" title="Multiple methods of LineWrapper may decide to flush part of the buffer to free up...">wrote_something</a>) <span class="comment">// if we didn&apos;t already write something to</span>
<a name="l02630"></a>02630                                       <span class="comment">// make space in the buffer</span>
<a name="l02631"></a>02631                     <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a246494d38e76d7f65a70f1d0867dc42f" title="Writes a single line of output from the buffer to write.">write_one_line</a>(
<a name="l02632"></a>02632                         write); <span class="comment">// write at most one line of actual output</span>
<a name="l02633"></a>02633             }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper_add20eca40865ad892d6c28b412ac14d5_icgraph.png" border="0" usemap="#de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper_add20eca40865ad892d6c28b412ac14d5_icgraph_map" alt=""></div>
<map name="de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper_add20eca40865ad892d6c28b412ac14d5_icgraph_map" id="de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper_add20eca40865ad892d6c28b412ac14d5_icgraph">
<area shape="rect" id="node3" href="../../da/dfb/structoption_1_1PrintUsageImplementation.html#ab38c4198c5cccea2ccd992c8e014df70" title="option::PrintUsageImplementation::printUsage" alt="" coords="408,5,699,35"/><area shape="rect" id="node5" href="../../df/de0/namespaceoption.html#a13564b6055a677443dfe6cdcc86875a4" title="Outputs a nicely formatted usage string with support for multi&#45;column formatting..." alt="" coords="747,5,875,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a246494d38e76d7f65a70f1d0867dc42f"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::write_one_line" ref="a246494d38e76d7f65a70f1d0867dc42f" args="(IStringWriter &amp;write)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void option::PrintUsageImplementation::LineWrapper::write_one_line </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d0b/structoption_1_1PrintUsageImplementation_1_1IStringWriter.html">IStringWriter</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>write</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Writes a single line of output from the buffer to <code>write</code>. </p>

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02488">2488</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l02488"></a>02488                                                       {
<a name="l02489"></a>02489                 <span class="keywordflow">if</span> (<a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a97de335317942101262413a35f639b18" title="Multiple methods of LineWrapper may decide to flush part of the buffer to free up...">wrote_something</a>) { <span class="comment">// if we already wrote something, we need</span>
<a name="l02490"></a>02490                                        <span class="comment">// to start a new line</span>
<a name="l02491"></a>02491                     write(<span class="stringliteral">&quot;\n&quot;</span>, 1);
<a name="l02492"></a>02492                     <span class="keywordtype">int</span> _ = 0;
<a name="l02493"></a>02493                     <a class="code" href="../../da/dfb/structoption_1_1PrintUsageImplementation.html#a4136c574bba35ea1f478e0b6d7022367">indent</a>(write, _, <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#acf828ad4ee388c881967142866d7d8b9" title="The indentation of the column to which the LineBuffer outputs. LineBuffer assumes...">x</a>);
<a name="l02494"></a>02494                 }
<a name="l02495"></a>02495 
<a name="l02496"></a>02496                 <span class="keywordflow">if</span> (!<a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a9cd367ca1d308458366be2ebbd018ebe">buf_empty</a>()) {
<a name="l02497"></a>02497                     <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a2e0ef4f940413addf063ad7e429c6556" title="Call BEFORE reading ...buf[tail].">buf_next</a>();
<a name="l02498"></a>02498                     write(<a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#abd9a32967913817ef8266bcf8af3e973" title="Ring buffer for data component of pair (data, length).">datbuf</a>[<a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a64dbc7e6c0858a9210ea1f39ce85084e" title="index for next read - 1 (i.e. increment tail BEFORE read)">tail</a>], <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a94c638feb65ec3bea97a80f944e532af" title="Ring buffer for length component of pair (data, length).">lenbuf</a>[tail]);
<a name="l02499"></a>02499                 }
<a name="l02500"></a>02500 
<a name="l02501"></a>02501                 <a class="code" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a97de335317942101262413a35f639b18" title="Multiple methods of LineWrapper may decide to flush part of the buffer to free up...">wrote_something</a> = <span class="keyword">true</span>;
<a name="l02502"></a>02502             }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ac47be76ba68b2e70f5cc6285c8e0fa6a"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::bufmask" ref="ac47be76ba68b2e70f5cc6285c8e0fa6a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#ac47be76ba68b2e70f5cc6285c8e0fa6a">option::PrintUsageImplementation::LineWrapper::bufmask</a> = 15<code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Must be a power of 2 minus 1. </p>

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02419">2419</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

</div>
</div>
<a class="anchor" id="abd9a32967913817ef8266bcf8af3e973"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::datbuf" ref="abd9a32967913817ef8266bcf8af3e973" args="[bufmask+1]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#abd9a32967913817ef8266bcf8af3e973">option::PrintUsageImplementation::LineWrapper::datbuf</a>[<a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#ac47be76ba68b2e70f5cc6285c8e0fa6a">bufmask</a>+1]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Ring buffer for data component of pair (data, length). </p>

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02427">2427</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5e2107b64c4a785fb92fca3f99e04c6e"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::head" ref="a5e2107b64c4a785fb92fca3f99e04c6e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a5e2107b64c4a785fb92fca3f99e04c6e">option::PrintUsageImplementation::LineWrapper::head</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>index for next write </p>

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02442">2442</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

</div>
</div>
<a class="anchor" id="a94c638feb65ec3bea97a80f944e532af"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::lenbuf" ref="a94c638feb65ec3bea97a80f944e532af" args="[bufmask+1]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a94c638feb65ec3bea97a80f944e532af">option::PrintUsageImplementation::LineWrapper::lenbuf</a>[<a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#ac47be76ba68b2e70f5cc6285c8e0fa6a">bufmask</a>+1]<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Ring buffer for length component of pair (data, length). </p>

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02423">2423</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

</div>
</div>
<a class="anchor" id="a64dbc7e6c0858a9210ea1f39ce85084e"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::tail" ref="a64dbc7e6c0858a9210ea1f39ce85084e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a64dbc7e6c0858a9210ea1f39ce85084e">option::PrintUsageImplementation::LineWrapper::tail</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>index for next read - 1 (i.e. increment tail BEFORE read) </p>

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02443">2443</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

</div>
</div>
<a class="anchor" id="a535a97a3d4669e873ba1700215d6b7e7"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::width" ref="a535a97a3d4669e873ba1700215d6b7e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a535a97a3d4669e873ba1700215d6b7e7">option::PrintUsageImplementation::LineWrapper::width</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The width of the column to line wrap. </p>

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02441">2441</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

</div>
</div>
<a class="anchor" id="a97de335317942101262413a35f639b18"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::wrote_something" ref="a97de335317942101262413a35f639b18" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#a97de335317942101262413a35f639b18">option::PrintUsageImplementation::LineWrapper::wrote_something</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Multiple methods of <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html">LineWrapper</a> may decide to flush part of the buffer to free up space. The contract of <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#add20eca40865ad892d6c28b412ac14d5" title="Process, wrap and output the next piece of data.">process()</a> says that only 1 line is output. So this variable is used to track whether something has output a line. It is reset at the beginning of <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#add20eca40865ad892d6c28b412ac14d5" title="Process, wrap and output the next piece of data.">process()</a> and checked at the end to decide if output has already occurred or is still needed. </p>

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02457">2457</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

</div>
</div>
<a class="anchor" id="acf828ad4ee388c881967142866d7d8b9"></a><!-- doxytag: member="option::PrintUsageImplementation::LineWrapper::x" ref="acf828ad4ee388c881967142866d7d8b9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#acf828ad4ee388c881967142866d7d8b9">option::PrintUsageImplementation::LineWrapper::x</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The indentation of the column to which the LineBuffer outputs. LineBuffer assumes that the indentation has already been written when <a class="el" href="../../de/d50/classoption_1_1PrintUsageImplementation_1_1LineWrapper.html#add20eca40865ad892d6c28b412ac14d5">process()</a> is called, so this value is only used when a buffer flush requires writing additional lines of output. </p>

<p>Definition at line <a class="el" href="../../da/d69/optionparser_8h_source.html#l02437">2437</a> of file <a class="el" href="../../da/d69/optionparser_8h_source.html">optionparser.h</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 5 Sep 2016 for Beam Longitudinal Dynamics code (BLonD) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
